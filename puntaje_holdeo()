def puntaje_holdeo(df, symbol):
    # ğŸ›‘ ValidaciÃ³n para evitar crasheo
    if df is None or df.empty or "close" not in df.columns:
        return 0, ["âŒ No hay datos suficientes para evaluar"]

    score = 0
    razones = []

    precio = df["close"].iloc[-1]
    e200 = ema200(df).iloc[-1]
    rsi_v = rsi(df).iloc[-1]
    div = detect_divergence(df)

    # Precio bajo EMA200 â†’ compra institucional
    if precio < e200:
        score += 2
        razones.append("ğŸ“‰ Precio bajo EMA200 â€” Descuento institucional")

    if rsi_v < 35:
        score += 2
        razones.append("ğŸ”» RSI en zona de sobreventa")

    if div:
        score += 1
        razones.append(f"âš  {div}")

    # IA â€” valida que tenga datos
    ai = ai_score(df)
    if ai and ai.get("confidence", 0) > 65:
        score += 2
        razones.append(f"ğŸ¤– IA proyecta subida ({ai['confidence']}%)")

    whales = whale_monitor()
    if whales:
        score += 2
        razones.append("ğŸ³ AcumulaciÃ³n de ballenas detectada")

    return score, razones
